{"ast":null,"code":"import { FAV_ADD, FAV_REMOVE, FETCH_SUCCESS, FETCH_LOADING, FETCH_ERROR, GET_FAVS_FROM_LS, DELETE_ALL_FAV_FROM_STORAGE } from \"./actions\";\nconst initial = {\n  favs: [],\n  current: null,\n  error: null,\n  loading: true\n};\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\nfunction clearFavsFromLocalStorage() {\n  return localStorage.clear();\n}\nexport function myReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initial;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case FAV_ADD:\n      const favAddValue = {\n        ...state,\n        favs: state.favs.find(item => item.id === action.payload.id) ? state.favs : [...state.favs, action.payload]\n      };\n      writeFavsToLocalStorage(favAddValue);\n      return favAddValue;\n    case FAV_REMOVE:\n      const favRemoveValue = {\n        ...state,\n        favs: state.favs.filter(item => item.id !== action.payload)\n      };\n      writeFavsToLocalStorage(favRemoveValue);\n      return favRemoveValue;\n    case FETCH_SUCCESS:\n      return {\n        ...state,\n        current: action.payload,\n        loading: false\n      };\n    case FETCH_LOADING:\n      return {\n        ...state,\n        loading: true\n      };\n    case FETCH_ERROR:\n      return {\n        ...state,\n        error: action.payload.message,\n        loading: false\n      };\n    case GET_FAVS_FROM_LS:\n      return {\n        ...state,\n        favs: readFavsFromLocalStorage() || initial.favs\n      };\n    case DELETE_ALL_FAV_FROM_STORAGE:\n      clearFavsFromLocalStorage();\n      return {\n        ...state,\n        favs: initial.favs\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["FAV_ADD","FAV_REMOVE","FETCH_SUCCESS","FETCH_LOADING","FETCH_ERROR","GET_FAVS_FROM_LS","DELETE_ALL_FAV_FROM_STORAGE","initial","favs","current","error","loading","writeFavsToLocalStorage","state","localStorage","setItem","JSON","stringify","readFavsFromLocalStorage","parse","getItem","clearFavsFromLocalStorage","clear","myReducer","arguments","length","undefined","action","type","favAddValue","find","item","id","payload","favRemoveValue","filter","message"],"sources":["C:/Users/EMRE CAN/fsweb-s10g4-thunk-and-apis/src/reducers.js"],"sourcesContent":["import {\r\n  FAV_ADD,\r\n  FAV_REMOVE,\r\n  FETCH_SUCCESS,\r\n  FETCH_LOADING,\r\n  FETCH_ERROR,\r\n  GET_FAVS_FROM_LS,\r\n  DELETE_ALL_FAV_FROM_STORAGE,\r\n} from \"./actions\";\r\n\r\nconst initial = {\r\n  favs: [],\r\n  current: null,\r\n  error: null,\r\n  loading: true,\r\n};\r\n\r\nfunction writeFavsToLocalStorage(state) {\r\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\r\n}\r\n\r\nfunction readFavsFromLocalStorage() {\r\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\r\n}\r\n\r\nfunction clearFavsFromLocalStorage(){\r\n  return localStorage.clear();\r\n}\r\n\r\nexport function myReducer(state = initial, action) {\r\n  switch (action.type) {\r\n    case FAV_ADD:\r\n    const favAddValue = {\r\n      ...state,\r\n      favs : state.favs.find(item => item.id===action.payload.id)?state.favs:[...state.favs,action.payload]\r\n    }\r\n      writeFavsToLocalStorage(favAddValue);\r\n      return favAddValue;\r\n\r\n    case FAV_REMOVE:\r\n      const favRemoveValue ={\r\n        ...state,\r\n        favs: state.favs.filter(item=> item.id!==action.payload),\r\n      };\r\n      writeFavsToLocalStorage(favRemoveValue);\r\n      return favRemoveValue;\r\n\r\n    case FETCH_SUCCESS:\r\n      return {\r\n        ...state,\r\n        current : action.payload,\r\n        loading :false,\r\n      };\r\n\r\n    case FETCH_LOADING:\r\n      return {\r\n        ...state,\r\n        loading :true,\r\n      };\r\n\r\n    case FETCH_ERROR:\r\n      return {\r\n        ...state,\r\n        error : action.payload.message,\r\n        loading :false,\r\n      };\r\n\r\n\r\n    case GET_FAVS_FROM_LS:\r\n      return {\r\n        ...state,\r\n        favs:readFavsFromLocalStorage()||initial.favs,\r\n\r\n      };\r\n\r\n    case DELETE_ALL_FAV_FROM_STORAGE:\r\n      clearFavsFromLocalStorage();\r\n    return  { ...state,\r\n    favs:initial.favs\r\n    };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,UAAU,EACVC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,gBAAgB,EAChBC,2BAA2B,QACtB,WAAW;AAElB,MAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,EAAE;EACRC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE;AACX,CAAC;AAED,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EACtCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAACL,IAAI,CAAC,CAAC;AAC3D;AAEA,SAASU,wBAAwBA,CAAA,EAAG;EAClC,OAAOF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC,CAAC;AAClD;AAEA,SAASC,yBAAyBA,CAAA,EAAE;EAClC,OAAOP,YAAY,CAACQ,KAAK,CAAC,CAAC;AAC7B;AAEA,OAAO,SAASC,SAASA,CAAA,EAA0B;EAAA,IAAzBV,KAAK,GAAAW,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGjB,OAAO;EAAA,IAAEoB,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC/C,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAK5B,OAAO;MACZ,MAAM6B,WAAW,GAAG;QAClB,GAAGhB,KAAK;QACRL,IAAI,EAAGK,KAAK,CAACL,IAAI,CAACsB,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAGL,MAAM,CAACM,OAAO,CAACD,EAAE,CAAC,GAACnB,KAAK,CAACL,IAAI,GAAC,CAAC,GAAGK,KAAK,CAACL,IAAI,EAACmB,MAAM,CAACM,OAAO;MACtG,CAAC;MACCrB,uBAAuB,CAACiB,WAAW,CAAC;MACpC,OAAOA,WAAW;IAEpB,KAAK5B,UAAU;MACb,MAAMiC,cAAc,GAAE;QACpB,GAAGrB,KAAK;QACRL,IAAI,EAAEK,KAAK,CAACL,IAAI,CAAC2B,MAAM,CAACJ,IAAI,IAAGA,IAAI,CAACC,EAAE,KAAGL,MAAM,CAACM,OAAO;MACzD,CAAC;MACDrB,uBAAuB,CAACsB,cAAc,CAAC;MACvC,OAAOA,cAAc;IAEvB,KAAKhC,aAAa;MAChB,OAAO;QACL,GAAGW,KAAK;QACRJ,OAAO,EAAGkB,MAAM,CAACM,OAAO;QACxBtB,OAAO,EAAE;MACX,CAAC;IAEH,KAAKR,aAAa;MAChB,OAAO;QACL,GAAGU,KAAK;QACRF,OAAO,EAAE;MACX,CAAC;IAEH,KAAKP,WAAW;MACd,OAAO;QACL,GAAGS,KAAK;QACRH,KAAK,EAAGiB,MAAM,CAACM,OAAO,CAACG,OAAO;QAC9BzB,OAAO,EAAE;MACX,CAAC;IAGH,KAAKN,gBAAgB;MACnB,OAAO;QACL,GAAGQ,KAAK;QACRL,IAAI,EAACU,wBAAwB,CAAC,CAAC,IAAEX,OAAO,CAACC;MAE3C,CAAC;IAEH,KAAKF,2BAA2B;MAC9Be,yBAAyB,CAAC,CAAC;MAC7B,OAAQ;QAAE,GAAGR,KAAK;QAClBL,IAAI,EAACD,OAAO,CAACC;MACb,CAAC;IAED;MACE,OAAOK,KAAK;EAChB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}